{"version":3,"sources":["pages/index.js"],"names":["Index","window","KALEIDOSYNC","Kaleidoscope","demoActive","shade","document","getElementById","buttons","querySelector","login","demo","body","classList","add","addEventListener","onLoaded","bind","getAuthId","toggleDemo","removeEventListener","fetch","then","res","json","auth_id","location","href","interval","setEventHooks","initializeVisualizer","canvas","startPaint","audio","pause","stopVisualizer","stopPaint"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MAEMA,K;AACJ,qBAAc;AAAA;;AACZC,aAAOC,WAAP,GAAqB,IAAIC,sBAAJ,CAAiB,IAAjB,EAAuB,IAAvB,CAArB;;AAEA,WAAKC,UAAL,GAAkB,KAAlB;;AAEA,WAAKC,KAAL,GAAaC,SAASC,cAAT,CAAwB,OAAxB,CAAb;AACA,WAAKC,OAAL,GAAeF,SAASG,aAAT,CAAuB,UAAvB,CAAf;AACA,WAAKC,KAAL,GAAa,KAAKF,OAAL,CAAaC,aAAb,CAA2B,QAA3B,CAAb;AACA,WAAKE,IAAL,GAAY,KAAKH,OAAL,CAAaC,aAAb,CAA2B,OAA3B,CAAZ;;AAEAH,eAASM,IAAT,CAAcC,SAAd,CAAwBC,GAAxB,CAA4B,QAA5B;;AAEA,WAAKT,KAAL,CAAWU,gBAAX,CAA4B,eAA5B,EAA6C,KAAKC,QAAL,CAAcC,IAAd,CAAmB,IAAnB,CAA7C;AACA,WAAKP,KAAL,CAAWK,gBAAX,CAA4B,OAA5B,EAAqC,KAAKG,SAA1C;AACA,WAAKP,IAAL,CAAUI,gBAAV,CAA2B,OAA3B,EAAoC,KAAKI,UAAzC;AACD;;;;iCAEU;AACT,aAAKX,OAAL,CAAaK,SAAb,CAAuBC,GAAvB,CAA2B,MAA3B;AACA,aAAKT,KAAL,CAAWQ,SAAX,CAAqBC,GAArB,CAAyB,MAAzB;AACA,aAAKT,KAAL,CAAWe,mBAAX,CAA+B,eAA/B,EAAgD,KAAKJ,QAArD;AACD;;;kCAEW;AACVK,cAAM,OAAN,EACGC,IADH,CACQ,UAACC,GAAD;AAAA,iBAASA,IAAIC,IAAJ,EAAT;AAAA,SADR,EAEGF,IAFH,CAEQ,UAACC,GAAD,EAAS;AACb,cAAIA,IAAIE,OAAR,EAAiB;AACfxB,mBAAOyB,QAAP,CAAgBC,IAAhB,uBAAyCJ,IAAIE,OAA7C;AACD;AACF,SANH;AAOD;;;mCAEY;AACX,YAAI,CAAC,KAAKrB,UAAV,EAAsB;AACpBH,iBAAOC,WAAP,CAAmB0B,QAAnB,GAA8B,KAA9B;AACA3B,iBAAOC,WAAP,CAAmB2B,aAAnB;AACA5B,iBAAOC,WAAP,CAAmB4B,oBAAnB;AACA7B,iBAAOC,WAAP,CAAmB6B,MAAnB,CAA0BC,UAA1B;AACA,eAAK5B,UAAL,GAAkB,IAAlB;AACD,SAND,MAMO;AACLH,iBAAOC,WAAP,CAAmB0B,QAAnB,GAA8B,IAA9B;AACA3B,iBAAOC,WAAP,CAAmB+B,KAAnB,CAAyBC,KAAzB;AACAjC,iBAAOC,WAAP,CAAmBiC,cAAnB;AACAlC,iBAAOC,WAAP,CAAmB6B,MAAnB,CAA0BK,SAA1B;AACA,eAAKhC,UAAL,GAAkB,KAAlB;AACD;AACF;;;;;;oBAGYJ,K","file":"index.js","sourcesContent":["import Kaleidoscope from '../kaleidosync/kaleidoscope'\n\nclass Index {\n  constructor() {\n    window.KALEIDOSYNC = new Kaleidoscope(true, true)\n\n    this.demoActive = false\n    \n    this.shade = document.getElementById('shade')\n    this.buttons = document.querySelector('.buttons')\n    this.login = this.buttons.querySelector('.login')\n    this.demo = this.buttons.querySelector('.demo')\n\n    document.body.classList.add('loaded')\n\n    this.shade.addEventListener('transitionend', this.onLoaded.bind(this))\n    this.login.addEventListener('click', this.getAuthId)\n    this.demo.addEventListener('click', this.toggleDemo);\n  }\n\n  onLoaded() { \n    this.buttons.classList.add('show')\n    this.shade.classList.add('hide')\n    this.shade.removeEventListener('transitionend', this.onLoaded)\n  }\n\n  getAuthId() {\n    fetch('/auth')\n      .then((res) => res.json())\n      .then((res) => {\n        if (res.auth_id) {\n          window.location.href = `/login?auth_id=${res.auth_id}`\n        }\n      })\n  }\n\n  toggleDemo() {\n    if (!this.demoActive) {\n      window.KALEIDOSYNC.interval = false\n      window.KALEIDOSYNC.setEventHooks()\n      window.KALEIDOSYNC.initializeVisualizer()\n      window.KALEIDOSYNC.canvas.startPaint()\n      this.demoActive = true\n    } else {\n      window.KALEIDOSYNC.interval = true\n      window.KALEIDOSYNC.audio.pause()\n      window.KALEIDOSYNC.stopVisualizer()\n      window.KALEIDOSYNC.canvas.stopPaint()\n      this.demoActive = false\n    }\n  }\n}\n\nexport default Index"]}